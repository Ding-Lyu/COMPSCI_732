(this["webpackJsonpmy-app1"]=this["webpackJsonpmy-app1"]||[]).push([[0],{179:function(e,t,a){},184:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=(a(179),a(67),a(24)),i=(a(140),a(57)),l=a(34),u=a(35),j=a(37),d=a(36),h=(a(128),a(43)),b=a(48),m=a(25),O=(a(184),a(51)),p=a(173),f=a(6),v=(n.Component,a.p+"static/media/home.61742069.jpg");function x(){return Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:v,alt:"poster",style:{width:"100%",height:"80vh",marginTop:20}})})}n.Component;var g=a(30),y=(a(190),a(142),a(77)),w=a(23),k=a.n(w),S=(a(152),a(56)),C=(a(209),a(169)),I=(a(131),a(54)),A=a(172),P=(a(212),a(164)),M=function(){return Object(f.jsx)("div",{style:{margin:50,textAlign:"center"},children:Object(f.jsx)(P.a,{})})},N=function(e){var t=e.movie,a=e.showButton,r=e.isInList,s=e.getData,c=e.turnOffCommenting,i=Object(n.useState)(!1),l=Object(g.a)(i,2),u=l[0],j=l[1],d=Object(n.useState)(""),h=Object(g.a)(d,2),b=h[0],m=h[1],O=Object(n.useState)(!1),p=Object(g.a)(O,2),v=p[0],x=(p[1],Object(n.useState)([])),y=Object(g.a)(x,2),w=y[0],P=y[1];Object(n.useEffect)((function(){!c&&u&&k.a.get("/movie/".concat(t._id,"/comment")).then((function(e){var t=e.data;return P(t.data.comments)})).catch((function(e){return console.log(e)}))}),[u,c,t]);return Object(f.jsxs)(S.a,{span:4,children:[Object(f.jsxs)("div",{className:"movie-poster",children:[Object(f.jsx)("img",{src:t.Poster,alt:"movie",style:{cursor:"pointer"},onClick:function(){return c?null:j(!0)}}),Object(f.jsxs)("div",{className:"movie__details",children:[Object(f.jsx)("h2",{children:t.Title}),Object(f.jsxs)("div",{className:"movie__details-bottom",children:[Object(f.jsx)("small",{children:t.Year}),a&&!c&&Object(f.jsx)(o.a,{type:"primary",onClick:function(){return r?function(e){k.a.delete("/favorite/"+e._id).then((function(e){return e.data,s()})).catch((function(e){return console.log(e)}))}(t):function(e){k.a.post("/favorite",{poster:e.Poster,title:e.Title,type:e.Type,year:e.Year,imdbID:e.imdbID,movieId:e._id}).then((function(e){return e.data,s()})).catch((function(e){return console.log(e)}))}(t)},children:r?"Remove":"Add"})]})]})]}),Object(f.jsxs)(C.a,{title:t.Title,visible:u,footer:null,onOk:function(){return j(!1)},onCancel:function(){return j(!1)},children:[w.map((function(e){return Object(f.jsxs)("div",{className:"comment",children:[Object(f.jsx)("h4",{children:e.userId.name}),Object(f.jsx)("p",{children:e.body})]})})),v&&Object(f.jsx)(M,{}),0===w.length&&!v&&Object(f.jsx)("div",{children:"No comments found"}),a&&Object(f.jsxs)("div",{className:"modal__footer",children:[Object(f.jsx)(I.a.TextArea,{showCount:!0,maxLength:100,value:b,placeholder:"Enter your comment...",onChange:function(e){return m(e.target.value)}}),Object(f.jsx)(o.a,{type:"primary",className:"modal__footer-button",onClick:function(){k.a.post("/movie/comment",{comment:b,movieId:t._id}).then((function(e){var t=e.data;P([t.data.comment].concat(Object(A.a)(w))),j(!1),m("")})).catch((function(e){return console.log(e)}))},children:"Comment"})]})]})]})},T=function(e){var t=Object(n.useState)([]),a=Object(g.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),o=Object(g.a)(c,2),i=o[0],l=o[1];Object(n.useEffect)((function(){!!localStorage.getItem("token")&&(l(!0),u())}),[]),Object(n.useEffect)((function(){e.isAuth||l(!1)}),[e.isAuth]);var u=function(){k.a.get("/favorite").then((function(e){var t=e.data;return s(t.data.movies)})).catch((function(e){return console.log(e)}))};return Object(f.jsx)(y.a,{children:e.movies.map((function(t,a){var n=-1!==r.findIndex((function(e){return e.imdbID===t.imdbID}));return Object(f.jsx)(N,{getData:u,isInList:n,movie:t,showButton:i,turnOffCommenting:e.turnOffCommenting},a)}))})},D=function(){var e=Object(n.useState)([{Title:"Star Wars: Episode IV - A New Hope",Year:"1977",imdbID:"tt0076759",Type:"movie",Poster:"https://m.media-amazon.com/images/M/MV5BNzVlY2MwMjktM2E4OS00Y2Y3LWE3ZjctYzhkZGM3YzA1ZWM2XkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg"},{Title:"Star Wars: Episode V - The Empire Strikes Back",Year:"1980",imdbID:"tt0080684",Type:"movie",Poster:"https://m.media-amazon.com/images/M/MV5BYmU1NDRjNDgtMzhiMi00NjZmLTg5NGItZDNiZjU5NTU4OTE0XkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg"},{Title:"Star Wars: Episode VI - Return of the Jedi",Year:"1983",imdbID:"tt0086190",Type:"movie",Poster:"https://m.media-amazon.com/images/M/MV5BOWZlMjFiYzgtMTUzNC00Y2IzLTk1NTMtZmNhMTczNTk0ODk1XkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_SX300.jpg"}]),t=Object(g.a)(e,2),a=t[0];t[1];return Object(f.jsx)("div",{children:Object(f.jsx)(T,{movies:a})})},z=a(40),E=a.n(z),_=a(60),q=function(e){var t=Object(n.useState)([]),a=Object(g.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),o=Object(g.a)(c,2),i=o[0],l=o[1],u=function(){var e=Object(_.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,k.a.get("/movie");case 3:t=e.sent,a=t.data,s(a.data.movies),l(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u()}),[]),i?Object(f.jsx)(M,{}):Object(f.jsx)(T,{movies:r,getMovies:u,isAuth:e.isAuth})},L=h.a.Content,V=h.a.Sider;n.Component;a(221);var F=a(170),Y=(a(296),a(168)),X=(a(155),a(39)),B=(a(297),a(138)),R=B.a.Option,Z=function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n.onClickSubmit=Object(_.a)(E.a.mark((function e(){var t,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({errors:{}}),e.next=4,k.a.post("/signup",Object(O.a)({},n.state));case 4:t=e.sent,a=t.data,console.log(a),r=a.data.token,k.a.defaults.headers.common.Authorization=r,localStorage.setItem("token",r),n.props.setAuth(),n.setState({visible:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n.setState({errors:e.t0.response.data.errors});case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),n.state={visible:!1,name:"",mobile:"",email:"",dob:"",gender:"",address:"",password:"",confirmPassword:"",errors:{}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.a,{style:{float:"right",margin:"10px",color:"white"},type:"primary",onClick:this.showDrawer,children:"Register"}),Object(f.jsxs)(F.a,{title:"Create a new account",width:"100%",onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80},footer:Object(f.jsxs)("div",{style:{textAlign:"right"},children:[Object(f.jsx)(o.a,{onClick:this.onClose,style:{marginRight:8},children:"Cancel"}),Object(f.jsx)(o.a,{onClick:this.onClickSubmit,type:"primary",children:"Submit"})]}),children:[Object(f.jsxs)(X.a,{layout:"vertical",hideRequiredMark:!0,children:[Object(f.jsxs)(y.a,{gutter:16,children:[Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter user name"}],children:Object(f.jsx)(I.a,{value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"Please enter user name"})})}),Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"Date of Birth",label:"Date of Birth",rules:[{required:!0,message:"Please enter user name"}],children:Object(f.jsx)(Y.a,{style:{width:"100%"},getPopupContainer:function(e){return e.parentElement},value:this.state.dob,onChange:function(t){return e.setState({dob:t.toISOString()})}})})})]}),Object(f.jsxs)(y.a,{gutter:16,children:[Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"Gender",label:"Gender",rules:[{required:!0,message:"Please select an owner"}],children:Object(f.jsxs)(B.a,{placeholder:"Please select gender",value:this.state.gender,onChange:function(t){return e.setState({gender:t.valueOf()})},children:[Object(f.jsx)(R,{value:"Male",children:"Male"}),Object(f.jsx)(R,{value:"Female",children:"Female"})]})})}),Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"Address",label:"Address",rules:[{required:!0,message:"Please enter your address"}],children:Object(f.jsx)(I.a,{placeholder:"Please enter your address",value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})}})})})]}),Object(f.jsxs)(y.a,{gutter:16,children:[Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"Eamil",label:"Email",rules:[{required:!0,message:"Please enter your email address"}],children:Object(f.jsx)(I.a,{placeholder:"Please enter your email address",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})})}),Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"Mobile",label:"Mobile",rules:[{required:!0,message:"Please enter your phone number"}],children:Object(f.jsx)(I.a,{placeholder:"Please enter your phone number",value:this.state.mobile,onChange:function(t){return e.setState({mobile:t.target.value})}})})})]}),Object(f.jsxs)(y.a,{gutter:16,children:[Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter your password"}],children:Object(f.jsx)(I.a.Password,{placeholder:"Please enter your password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})})}),Object(f.jsx)(S.a,{span:12,children:Object(f.jsx)(X.a.Item,{name:"confirm-password",label:"confirmPassword",rules:[{required:!0,message:"Please re-enter your password"}],children:Object(f.jsx)(I.a.Password,{placeholder:"Please re-enter your password",value:this.state.confirmPassword,onChange:function(t){return e.setState({confirmPassword:t.target.value})}})})})]})]}),this.state.errors&&Object(f.jsx)("ul",{style:{color:"red"},children:Object.values(this.state.errors).map((function(e){return Object(f.jsx)("li",{children:e},e)}))})]})]})}}]),a}(n.Component),G=(a(293),a(171));function U(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),i=Object(g.a)(c,2),l=i[0],u=i[1],j=Object(n.useState)(!1),d=Object(g.a)(j,2),h=d[0],b=d[1],m=function(){var t=Object(_.a)(E.a.mark((function t(){var a,n,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!1),t.prev=1,t.next=4,k.a.post("/login",{email:r,password:l});case 4:a=t.sent,n=a.data,s=n.data.token,k.a.defaults.headers.common.Authorization=s,localStorage.setItem("token",s),e.setAuth(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),b(!0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),p={wrapperCol:{offset:10,span:16}};return Object(f.jsxs)("div",{style:{marginTop:"10%"},children:[h&&Object(f.jsx)("h3",{style:{color:"red"},children:"In valid email and password!"}),Object(f.jsxs)(X.a,Object(O.a)(Object(O.a)({},{labelCol:{span:4},wrapperCol:{span:16}}),{},{name:"basic",initialValues:{remember:!0},children:[Object(f.jsx)(X.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(f.jsx)(I.a,{value:r,onChange:function(e){return s(e.target.value)}})}),Object(f.jsx)(X.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(f.jsx)(I.a.Password,{value:l,onChange:function(e){return u(e.target.value)}})}),Object(f.jsx)(X.a.Item,Object(O.a)(Object(O.a)({},p),{},{name:"remember",valuePropName:"checked",children:Object(f.jsx)(G.a,{children:"Remember me"})})),Object(f.jsx)(X.a.Item,Object(O.a)(Object(O.a)({},p),{},{children:Object(f.jsx)(o.a,{onClick:m,type:"primary",htmlType:"submit",children:"Submit"})}))]}))]})}var W=a.p+"static/media/logo.3cbb6dad.png",Q=function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).login=Object(_.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("");case 3:t=e.sent,a=t.data,console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.state={email:"",password:""},n}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"login-home",children:[Object(f.jsx)("center",{children:Object(f.jsx)("img",{style:{width:"30%",marginTop:"50px"},src:W})}),Object(f.jsx)("center",{children:Object(f.jsx)(U,{setAuth:this.props.setAuth})})]})}}]),a}(n.Component),H=function(){var e=Object(n.useState)(!0),t=Object(g.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(g.a)(s,2),o=c[0],i=c[1],l=function(){var e=Object(_.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://www.omdbapi.com/?s=harry potter&apikey=ebe923f6",e.next=3,fetch("http://www.omdbapi.com/?s=harry potter&apikey=ebe923f6");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),i(a.Search),r(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),a?Object(f.jsx)(M,{}):Object(f.jsx)(T,{turnOffCommenting:!0,movies:o,getMovies:l})},J=(h.a.Content,h.a.Sider,function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)(H,{})}}]),a}(n.Component)),K=function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).removeItem=function(e){k.a.delete("/favorite/"+e._id).then((function(e){e.data;return n.getData()})).catch((function(e){return console.log(e)}))},n.getData=function(){k.a.get("/favorite").then((function(e){var t=e.data;return n.setState({movies:t.data.movies})})).catch((function(e){return console.log(e)}))},n.state={movies:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return Object(f.jsx)(T,{movies:this.state.movies,getMovies:this.getData,isAuth:this.props.isAuth})}}]),a}(n.Component),$=h.a.Header,ee=h.a.Content;h.a.Footer;k.a.defaults.baseURL="http://localhost:5000";var te=function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleSetIsAuth=function(){n.setState({isAuth:!0})},n.handleUnsetIsAuth=function(){n.setState({isAuth:!1})},n.onLogout=function(){n.setState({isAuth:!1}),delete k.a.defaults.headers.common.Authorization,localStorage.removeItem("token")},n.state={isAuth:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e?(this.setState({isAuth:!0}),k.a.defaults.headers.common.Authorization=e):this.setState({isAuth:!1})}},{key:"render",value:function(){return Object(f.jsx)(b.a,{children:Object(f.jsxs)(h.a,{className:"layout",children:[Object(f.jsxs)($,{style:{backgroundColor:"#202020"},children:[Object(f.jsx)("div",{className:"logo"}),Object(f.jsxs)(i.a,{style:{backgroundColor:"#202020"},theme:"dark",mode:"horizontal",defaultSelectedKeys:[window.location.hash.split("/")[1]],children:[Object(f.jsx)(i.a.Item,{style:{backgroundColor:"#202020"},children:Object(f.jsx)(b.b,{to:"/home",children:"Home"})},"home"),Object(f.jsx)(i.a.Item,{style:{backgroundColor:"#202020"},children:Object(f.jsx)(b.b,{to:"/movie",children:"Movie"})},"movie"),Object(f.jsx)(i.a.Item,{style:{backgroundColor:"#202020"},children:Object(f.jsx)(b.b,{to:"/series/new/1",children:"Series"})},"series"),this.state.isAuth&&Object(f.jsx)(i.a.Item,{style:{backgroundColor:"#202020"},children:Object(f.jsx)(b.b,{to:"/watch-list",children:"Watch List"})},"about"),this.state.isAuth?Object(f.jsx)(o.a,{type:"primary",onClick:this.onLogout,style:{float:"right",marginTop:"10px",color:"white"},children:"Logout"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.b,{to:"/login",children:Object(f.jsx)(o.a,{type:"primary",style:{float:"right",marginTop:"10px",color:"white"},children:"Login"})}),Object(f.jsx)(Z,{setAuth:this.handleSetIsAuth})]})]})]}),Object(f.jsx)(ee,{style:{padding:"0 50px",backgroundColor:"white",width:"100%"},children:Object(f.jsx)("div",{className:"site-layout-content",children:Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{path:"/home",component:x}),this.state.isAuth?Object(f.jsx)(m.b,{path:"/watch-list",children:Object(f.jsx)(K,{isAuth:this.state.isAuth})}):Object(f.jsx)(m.b,{path:"/login",children:Object(f.jsx)(Q,{setAuth:this.handleSetIsAuth})}),Object(f.jsx)(m.b,{path:"/movie",children:Object(f.jsx)(q,{isAuth:this.state.isAuth})}),Object(f.jsx)(m.b,{path:"/series",component:J}),Object(f.jsx)(m.a,{to:"/home"})]})})})]})})}}]),a}(n.Component),ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,299)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(te,{})}),document.getElementById("root")),ae()}},[[295,1,2]]]);
//# sourceMappingURL=main.7cedef18.chunk.js.map